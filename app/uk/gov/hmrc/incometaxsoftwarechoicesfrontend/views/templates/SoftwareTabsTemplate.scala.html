@*
 * Copyright 2023 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.incometaxsoftwarechoicesfrontend.viewmodels.SoftwareChoicesResultsViewModel
@import uk.gov.hmrc.incometaxsoftwarechoicesfrontend.views.html.templates.SoftwareVendorsTemplate

@this(
        softwareVendorsTemplate: SoftwareVendorsTemplate,
        govukTabs: GovukTabs
)

@(viewModel: SoftwareChoicesResultsViewModel)(implicit messages: Messages)

@tabHeading(tabKey: String, count: Int) = @{
  count match {
      case 0 => s"""<h2 class="govuk-heading-l">${messages(tabKey + ".heading.none")}</h2>"""
      case 1 => s"""<h2 class="govuk-heading-l">${messages(tabKey + ".heading.one")}</h2>"""
      case _ => s"""<h2 class="govuk-heading-l">${messages(tabKey + ".heading.many", count)}</h2>"""
  }
}

@tabInsetText(tabKey: String, count: Int) = @{
    count match {
        case 0 => s"""<div class="govuk-inset-text">${messages(tabKey + ".inset.none")}</div>"""
        case 1 => s"""<div class="govuk-inset-text">${messages(tabKey + ".inset.one")}</div>"""
        case _ => s"""<div class="govuk-inset-text">${messages(tabKey + ".inset.many")}</div>"""
    }
}


@allInOneTab = @{
  TabItem(
    id = Some("all-in-one-software"),
    label = messages("search-software.all-in-one-tab.title"),
    panel = TabPanel(
     content = HtmlContent(
             tabHeading("search-software.all-in-one-tab", viewModel.allInOneVendors.size) +
             tabInsetText("search-software.all-in-one-tab", viewModel.allInOneVendors.size) +
             softwareVendorsTemplate(viewModel.allInOneVendors, viewModel.zeroResults)
  )))
}

@otherTab = @{
  TabItem(
    id = Some("other-software"),
    label = messages("search-software.other-software-tab.title"),
    panel = TabPanel(
        content = HtmlContent(
             tabHeading("search-software.other-software-tab", viewModel.otherVendors.size) +
             tabInsetText("search-software.other-software-tab", viewModel.otherVendors.size) +
             softwareVendorsTemplate(viewModel.otherVendors, viewModel.zeroResults)
  )))
}

@{
 govukTabs(Tabs(
  items = Seq(allInOneTab, otherTab))
 )
}